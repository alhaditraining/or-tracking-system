@attribute [ExcludeFromInteractiveRouting]
@inject NavigationManager NavigationManager

@code {
    protected override void OnInitialized()
    {
        var abs = NavigationManager.ToAbsoluteUri(NavigationManager.Uri);
        var pathOnly = abs.AbsolutePath; // بدون query

        if (string.IsNullOrWhiteSpace(pathOnly) ||
            pathOnly.StartsWith("/Account", StringComparison.OrdinalIgnoreCase))
        {
            pathOnly = "/reports/dashboard";
        }

        NavigationManager.NavigateTo(
            $"/Account/Login?ReturnUrl={Uri.EscapeDataString(pathOnly)}",
            forceLoad: true);
    }
}
